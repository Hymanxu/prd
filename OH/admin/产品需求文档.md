# OpenHarmony 社区创新奖励计划 - 管理后台产品需求文档

## 1. 项目概述

### 1.1 项目背景
OpenHarmony 社区创新奖励计划是一个面向开发者的技术竞赛平台，旨在通过竞赛形式激励开发者参与 OpenHarmony 生态建设，发现和解决技术问题，提升代码质量和安全性。

### 1.2 产品定位
管理后台是面向竞赛组织者和管理员的综合管理平台，提供竞赛全生命周期管理、参赛者管理、内容管理、奖励发放等核心功能。

### 1.3 用户群体
- **主要用户**：竞赛管理员、技术专家、运营人员
- **次要用户**：系统管理员、审核人员

### 1.4 核心价值
- 提供完整的竞赛管理解决方案
- 简化管理流程，提高运营效率
- 确保竞赛公平性和透明度
- 支持多样化的奖励机制

## 2. 功能架构

### 2.1 系统架构
```
管理后台系统
├── 竞赛管理模块
│   ├── 竞赛管理
│   ├── 报名管理
│   └── 网站管理
├── 赛题管理模块
│   ├── 赛题管理
│   └── 提交审核
├── 奖励管理模块
│   ├── 赛事结算
│   ├── 证书发放
│   └── 证书模板
└── 系统管理模块
    └── 管理员账号
```

### 2.2 权限体系
- **竞赛管理权限**：竞赛创建、编辑、发布、报名管理
- **赛题管理权限**：赛题创建、编辑、提交审核
- **奖励管理权限**：积分管理、证书发放、模板管理
- **系统管理权限**：管理员账号管理、系统配置

## 3. 详细功能需求

### 3.1 竞赛管理模块

#### 3.1.1 竞赛管理
**功能描述**：管理竞赛的完整生命周期，包括创建、编辑、发布、状态管理等。

**核心功能**：
- **竞赛创建**
  - 封面上传（建议尺寸：640×360，PNG格式）
  - 竞赛名称设置
  - 比赛时间设置（开始时间-结束时间）
  - 竞赛主题描述
  - 状态管理（新建/已发布）

- **竞赛列表管理**
  - 显示竞赛序号、封面、名称、时间、状态、参赛人数、赛题数量
  - 支持发布/取消发布操作
  - 支持编辑竞赛信息

**业务规则**：
- 新建竞赛默认为"新建"状态，需手动发布
- 已发布竞赛可以取消发布，但不能删除
- 竞赛时间不能与现有竞赛冲突

**数据结构**：
```javascript
{
  id: Number,           // 竞赛ID
  name: String,         // 竞赛名称
  cover: File,          // 封面图片
  startTime: DateTime,  // 开始时间
  endTime: DateTime,    // 结束时间
  theme: String,        // 竞赛主题
  status: String,       // 状态：新建/已发布
  participantCount: Number, // 参赛人数
  problemCount: Number  // 赛题数量
}
```

#### 3.1.2 报名管理
**功能描述**：管理参赛者报名信息，支持查看详情、导出数据、移除参赛者等操作。

**核心功能**：
- **报名列表展示**
  - 显示用户名、学校、专业、邮箱、报名时间
  - 支持按竞赛筛选
  - 支持查看详细信息
  - 支持移除参赛者

- **报名详情查看**
  - 完整的参赛者信息展示
  - 包含联系方式、学校信息等

- **数据导出**
  - 支持导出报名数据为Excel格式
  - 可按竞赛筛选导出

**业务规则**：
- 移除参赛者需要确认操作
- 导出数据包含所有报名信息
- 支持按竞赛维度管理报名

#### 3.1.3 网站管理
**功能描述**：管理网站前台展示内容，包括首页Banner、大赛介绍、通知公告、常见问题等。

**核心功能**：

**首页Banner管理**
- Banner图片上传（建议尺寸：1920×630，PNG格式）
- 链接地址设置（可选）
- 启用/禁用状态管理
- 支持多个Banner轮播

**大赛介绍管理**
- 富文本编辑器支持
- 支持文本格式化（粗体、斜体、下划线）
- 支持插入链接和图片
- 内容预览功能
- 一键清空功能

**通知公告管理**
- 公告创建和编辑
- 富文本内容编辑
- 发布状态管理
- 发布时间记录
- 取消发布功能

**常见问题管理**
- FAQ创建和编辑
- 问题和答案的富文本编辑
- 显示/隐藏状态管理
- 支持问题排序

**业务规则**：
- 通知公告发布后记录发布时间
- FAQ默认为显示状态
- 富文本编辑器支持HTML格式
- Banner支持设置跳转链接

### 3.2 赛题管理模块

#### 3.2.1 赛题管理
**功能描述**：管理竞赛题目，支持单个创建和批量导入，关联GitHub Issue。

**核心功能**：
- **赛题创建**
  - 赛题名称设置
  - 难度等级选择（简单/中等/困难）
  - GitHub Issue链接关联
  - 详细介绍（富文本编辑）
  - 标签管理
  - 所属竞赛关联

- **批量导入**
  - 支持Excel/CSV格式导入
  - 提供标准模板下载
  - 导入数据验证

- **赛题列表管理**
  - 按竞赛筛选显示
  - 显示赛题信息、难度、Issue链接、标签
  - 支持编辑赛题信息

**业务规则**：
- 每个赛题必须关联到具体竞赛
- Issue链接必须是有效的GitHub链接
- 标签支持多个，用逗号分隔
- 批量导入需要数据格式验证

**数据结构**：
```javascript
{
  id: Number,           // 赛题ID
  name: String,         // 赛题名称
  contestId: Number,    // 所属竞赛ID
  difficulty: String,   // 难度：easy/medium/hard
  issueUrl: String,     // GitHub Issue链接
  description: String,  // 详细介绍（HTML）
  tags: Array<String>,  // 标签数组
  status: String        // 状态
}
```

#### 3.2.2 提交审核
**功能描述**：审核参赛者的代码提交，进行积分评定和状态管理。

**核心功能**：
- **提交列表管理**
  - 显示Commit ID、用户名、赛题、提交时间、类型、积分、状态
  - 支持多维度筛选（竞赛、赛题、状态）
  - 支持批量操作（批量通过/拒绝）
  - 支持单个审核

- **提交详情查看**
  - 完整的提交信息展示
  - 提交说明内容
  - 代码链接查看
  - 从详情页直接进入审核

- **审核功能**
  - 审核结果选择（通过/拒绝）
  - 积分设定
  - 审核意见填写
  - 审核记录保存

- **批量操作**
  - 支持选择多个提交进行批量审核
  - 全选/取消全选功能
  - 批量通过/拒绝确认

**业务规则**：
- 审核必须填写积分
- 审核意见为可选项
- 批量操作需要确认
- 审核后状态不可逆转
- 积分影响最终排名

### 3.3 奖励管理模块

#### 3.3.1 赛事结算
**功能描述**：管理竞赛结束后的积分统计、排名计算、奖励发放等结算工作。

**核心功能**：
- **积分排名管理**
  - 按竞赛显示参赛者排名
  - 显示用户名、学校、总积分、收款信息状态
  - 支持积分调整功能
  - 支持查看积分明细

- **积分详情查看**
  - 显示用户基本信息和排名
  - 详细的积分明细展示
  - 按提交类型分类显示积分来源

- **积分调整**
  - 支持手动调整用户积分
  - 需要填写调整原因
  - 调整后重新计算排名

- **数据导出**
  - 导出结算数据为Excel格式
  - 包含完整的排名和积分信息

**业务规则**：
- 积分调整需要管理员权限
- 调整后自动重新计算排名
- 导出数据包含所有结算信息
- 收款信息状态影响奖励发放

#### 3.3.2 证书发放
**功能描述**：根据设定的规则自动或手动发放电子证书给符合条件的参赛者。

**核心功能**：
- **发放规则管理**
  - 选择目标竞赛
  - 设置发放条件（按排名/按积分/按提交次数）
  - 选择证书模板
  - 设置发放时间

- **发放条件设置**
  - **按排名**：前N名获得证书
  - **按积分**：积分大于等于X分获得证书
  - **按提交次数**：提交次数大于等于Y次获得证书

- **发放规则列表**
  - 显示竞赛、发放条件、证书模板、发放时间
  - 支持编辑和删除规则
  - 支持手动触发发放

**业务规则**：
- 一个竞赛可以设置多个发放规则
- 发放条件互不冲突
- 证书发放后不可撤销
- 支持定时自动发放

**数据结构**：
```javascript
{
  id: Number,           // 规则ID
  contestId: Number,    // 竞赛ID
  conditionType: String, // 条件类型：rank/score/submission
  conditionValue: Number, // 条件值
  templateId: Number,   // 证书模板ID
  issueTime: DateTime,  // 发放时间
  status: String        // 状态
}
```

#### 3.3.3 证书模板
**功能描述**：设计和管理电子证书模板，支持可视化编辑和字段配置。

**核心功能**：
- **模板创建**
  - 模板名称设置
  - 证书背景图片上传
  - 可视化字段布局设计
  - 字段拖拽和定位

- **可视化编辑器**
  - 证书画布展示
  - 字段面板（竞赛名称、主题、时间、用户名、奖项）
  - 拖拽字段到画布
  - 字段位置调整
  - 字段大小调整
  - 双击删除字段

- **模板管理**
  - 模板列表展示
  - 模板预览功能
  - 模板编辑功能
  - 模板删除功能

- **预览功能**
  - 实时预览证书效果
  - 支持从创建和编辑模式预览
  - 预览模式下可直接进入编辑

**交互设计**：
- 字段支持拖拽移动
- 支持调整字段大小
- 双击字段可删除
- 提供重置功能清空所有字段
- 支持预览和编辑模式切换

**业务规则**：
- 每个模板必须有唯一名称
- 证书背景图片为必需项
- 字段位置信息自动保存
- 删除模板需要确认操作

### 3.4 系统管理模块

#### 3.4.1 管理员账号
**功能描述**：管理系统管理员账号，包括账号创建、权限分配、状态管理等。

**核心功能**：
- **账号创建**
  - 管理员姓名设置
  - 手机号码设置
  - 权限分配（竞赛管理、赛题管理、奖励管理、系统管理）
  - 账号状态设置

- **账号列表管理**
  - 显示姓名、手机号、权限、状态、创建时间、最后登录时间
  - 支持编辑账号信息
  - 支持启用/禁用账号

- **权限管理**
  - 细粒度权限控制
  - 支持多权限组合
  - 权限变更记录

**业务规则**：
- 手机号码作为登录凭证，必须唯一
- 禁用账号无法登录系统
- 权限变更立即生效
- 系统管理权限包含所有功能权限

## 4. 技术规范

### 4.1 前端技术栈
- **基础技术**：HTML5、CSS3、JavaScript (ES6+)
- **样式框架**：自定义CSS框架
- **图标库**：Font Awesome 6.4.0
- **模块化**：ES6 Modules
- **构建工具**：原生开发，无需构建

### 4.2 架构设计
- **模块化设计**：每个功能模块独立的JavaScript类
- **事件驱动**：基于DOM事件的交互处理
- **状态管理**：本地状态管理，支持数据持久化
- **组件复用**：通用组件和工具函数复用

### 4.3 代码结构
```
admin/
├── admin.html              # 主页面
├── admin.css              # 样式文件
└── js/
    ├── main.js            # 主入口文件
    ├── navigation.js      # 导航管理
    ├── modals.js         # 模态框管理
    ├── events.js         # 竞赛管理
    ├── problems.js       # 赛题管理
    ├── submissions.js    # 提交审核
    ├── certificates.js   # 证书管理
    ├── users.js          # 用户管理
    ├── settings.js       # 网站配置
    ├── global-functions.js # 全局函数
    └── template-loader.js  # 模板加载器
```

### 4.4 数据管理
- **本地存储**：使用localStorage进行数据持久化
- **状态同步**：模块间通过事件进行状态同步
- **数据验证**：前端数据验证和后端验证双重保障

## 5. 用户体验设计

### 5.1 界面设计原则
- **一致性**：统一的视觉风格和交互模式
- **易用性**：简洁直观的操作流程
- **响应性**：适配不同屏幕尺寸
- **反馈性**：及时的操作反馈和状态提示

### 5.2 交互设计
- **导航设计**：左侧固定导航，支持功能模块快速切换
- **表格操作**：支持批量操作、筛选、排序
- **模态框**：重要操作使用模态框确认
- **拖拽交互**：证书模板编辑支持拖拽操作

### 5.3 响应式设计
- **断点设置**：支持桌面端、平板端适配
- **布局适配**：弹性布局适应不同屏幕
- **组件适配**：表格、表单等组件响应式设计

## 6. 性能要求

### 6.1 页面性能
- **加载时间**：首屏加载时间 < 2秒
- **交互响应**：用户操作响应时间 < 200ms
- **资源优化**：图片压缩、代码压缩

### 6.2 数据处理
- **列表渲染**：支持大量数据的高效渲染
- **搜索筛选**：快速的数据筛选和搜索
- **批量操作**：高效的批量数据处理

## 7. 安全要求

### 7.1 权限控制
- **登录验证**：安全的登录机制
- **权限校验**：细粒度的功能权限控制
- **会话管理**：安全的会话管理机制

### 7.2 数据安全
- **输入验证**：严格的用户输入验证
- **XSS防护**：防止跨站脚本攻击
- **CSRF防护**：防止跨站请求伪造

## 8. 测试要求

### 8.1 功能测试
- **核心功能**：所有核心功能的完整测试
- **边界测试**：异常情况和边界条件测试
- **兼容性测试**：不同浏览器兼容性测试

### 8.2 用户体验测试
- **易用性测试**：用户操作流程测试
- **性能测试**：页面加载和响应性能测试
- **响应式测试**：不同设备和屏幕尺寸测试

## 9. 部署要求

### 9.1 环境要求
- **Web服务器**：支持静态文件服务
- **浏览器支持**：Chrome 80+、Firefox 75+、Safari 13+
- **网络要求**：稳定的网络连接

### 9.2 部署流程
- **文件部署**：将所有文件部署到Web服务器
- **配置检查**：确认所有配置文件正确
- **功能验证**：部署后进行功能验证测试

## 10. 维护和扩展

### 10.1 代码维护
- **代码规范**：遵循统一的代码规范
- **文档更新**：及时更新技术文档
- **版本管理**：使用Git进行版本控制

### 10.2 功能扩展
- **模块化设计**：支持新功能模块的快速集成
- **API接口**：预留后端API接口对接能力
- **插件机制**：支持第三方插件扩展

## 11. 项目交付

### 11.1 交付物清单
- [ ] 完整的源代码
- [ ] 产品需求文档
- [ ] 技术设计文档
- [ ] 用户操作手册
- [ ] 测试报告
- [ ] 部署指南

### 11.2 验收标准
- [ ] 所有功能模块正常运行
- [ ] 用户体验符合设计要求
- [ ] 性能指标达到要求
- [ ] 安全测试通过
- [ ] 兼容性测试通过
- [ ] 文档完整准确

---

**文档版本**：v1.0  
**创建日期**：2025年1月20日  
**最后更新**：2025年1月20日  
**文档状态**：正式版